<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_40) on Tue Mar 17 17:43:29 CET 2015 -->
<title>Initializer</title>
<meta name="date" content="2015-03-17">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Initializer";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/anotherservice/rest/Index.UTF8Handler.html" title="class in com.anotherservice.rest"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/anotherservice/rest/InitializerOnce.html" title="class in com.anotherservice.rest"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/anotherservice/rest/Initializer.html" target="_top">Frames</a></li>
<li><a href="Initializer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.anotherservice.rest</div>
<h2 title="Interface Initializer" class="title">Interface Initializer</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/anotherservice/rest/InitializerOnce.html" title="class in com.anotherservice.rest">InitializerOnce</a>, <a href="../../../com/anotherservice/rest/Self.html" title="class in com.anotherservice.rest">Self</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">Initializer</span></pre>
<div class="block"><p>This is the REST service initializer interface. Custom services discovered by the <a href="../../../com/anotherservice/rest/core/ServiceMonitor.html" title="class in com.anotherservice.rest.core"><code>ServiceMonitor</code></a> will call the
 <code>initialize()</code> method on <strong>a new instance using an empty constructor</strong> instead of using a factory (see discussion below).
 </p><p><br />
 <big><strong>Discussion on the empty constructor vs factory</strong></big><br />
 Typically, in order to obtain an instance of a class which may be extended (or an interface) one shall use a <em>factory method</em>.<br />
 Such method would have the following signature : <br /><code>public Initializer create()</code><br />
 Then, one can easily return a different implementation of the Initializer interface. Easy enough.
 </p><p><br />
 The factory pattern is motivated by the fact that a <code>constructor</code> is part of the implementation of a class. Thus,
 none can know in advance the constructor signature (and this is why interfaces cannot define a constructor signature). <em>"What if
 my specific implementation required a different constructor !?"</em> Then, in order to avoid this issue, the creation of the instance
 is isolated in a <code>factory method</code> at the sole discretion of the implementor.
 </p><p><br />
 However, how do we call this factory method ?
 Either it is a <code>static</code> method, which enables us to call it from anywhere (very convenient), but in this case, it means that
 the factory class is predefined ! And so is the static factory method... which is totally against the pattern. (interfaces for static methods are not possible).<br />
 Or, second option, is to create some sort of factory for the factory class such that anyone can implement its own factory method...<br />
 But how do we get this factory class instance ? From a factory itself... and we go in an infinite loop.
 </p><p><br />
 Hence, typical factory mechanisms imply that from the executing code, one shall <em>register</em> its own factory implementation (either as a singleton or else)
 using a static method like this one : <br /><code>public static void register(Factory instance)</code>.<br />
 Therefore, from anywhere, we can get the singleton factory and call the <code>create()</code> method to get an instance of <code>Initializer</code>.<br />
 Tadaaam, problem solved !
 </p><p><br />
 - But huh... wait a second, <em>"from the executing code"</em> you said... But in this webservice context, where we <u>do not</u> have executing code in advance,
 how can we achieve this !?<br />
 - Indeed, services implementation reside in a jar file which is <strong>not loaded</strong> until used. <br />
 - And when it is being loaded, how do we know where to start !? <br />
 - Hey, using an <code>Initializer</code> interface, then we get an instance and simply call the <code>initialize()</code> method against it.<br />
 - But in order to get the <code>Initializer</code> implementation, we should use a factory, right ? A factory to get the initializer of the factory to 
 register the factory to get the <code>Initializer</code> of the service...<br />
 - Hmmm... it seems we are running into a stupid pattern loop here, isnt't it !?<br />
 </p><p><br />
 <big><strong>How do <em>others</em> solve this ?</strong></big><br />
 They use a static method to get the factory <em>from somewhere</em> ! This is the only option to call something without constructing a new factory manually and running in the above problem.<br />
 So either they use a <code>static void main()</code>-like method defined in the <em>manifest</em> of the jar. But relying on a manifest file is not very 
 convenient and not very robust(, but it turns out to be a bit like our solution but ours is better).<br />
 Or, they rely on the name of the class in the jar file... which is totally stupid because a class name does not imply anything about its content.<br />
 Or, they use annontations such that when a proper annotated class is <em>found</em>, we can call the static method and get the factory. How is the class <em>"found"</em> then !?<br />
 Via reflection. This means that they should <strong>scan and load into memory every class in every jar file</strong> in order to process them all to try to find 
 a proper class that has the good annotation. And what if there are two !? Then we run into problems.<br /><br />
 <em>JavaBeans</em> are not a valid option either because it relies on (I) internal method naming, and (II) reflection as stated above.
 </p><p><br />
 <big><strong>Solution</strong></big><br />
 Therefore, in order to avoid all this factory mess, and be much lighter and smarter than others, lets agree that <strong>implementations of <code>Initializer</code> 
 simply should have a default empty constructor</strong> so we can instanciate it without problems and we just call the <code>initialize()</code> method.<br />
 Point.</p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Simon Uyttendaele <em>- By the way, I'm open to discussions on this at any time ;)</em></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/anotherservice/rest/core/ServiceMonitor.html" title="class in com.anotherservice.rest.core"><code>ServiceMonitor</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/anotherservice/rest/Initializer.html#initialize()">initialize</a></strong>()</code>
<div class="block">Initializes the service.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>initialize</h4>
<pre>void&nbsp;initialize()</pre>
<div class="block">Initializes the service. One may create resources, instanciate Handlers and register them at this point.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/anotherservice/util/Context.html" title="class in com.anotherservice.util"><code>Context</code></a>, 
<a href="../../../com/anotherservice/rest/InitializerOnce.html" title="class in com.anotherservice.rest"><code>InitializerOnce</code></a></dd><dt><span class="strong">Note:</span></dt>
  <dd><ul><li>Every <code>Initializer</code> instance is created and run in its own <code>ClassLoader</code> in order to avoid library collusions. 
 <a href="../../../com/anotherservice/rest/Handler.html" title="class in com.anotherservice.rest"><code>Handlers</code></a> and other resources are therefore also created in this context</li>
 <li>There is no guarantee that this method will be called only once. A single instance may be called several times and different instances may be created. Thus,
 one should take proper actions to handle this behavior.</li></ul></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/anotherservice/rest/Index.UTF8Handler.html" title="class in com.anotherservice.rest"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/anotherservice/rest/InitializerOnce.html" title="class in com.anotherservice.rest"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/anotherservice/rest/Initializer.html" target="_top">Frames</a></li>
<li><a href="Initializer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
